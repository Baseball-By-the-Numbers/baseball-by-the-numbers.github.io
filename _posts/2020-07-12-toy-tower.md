---
layout: post
published: true
title: Trillions of Toy Towers
date: 2020/07/12
---

>Question: Mira the baby architect has a tapering post and some rings. If placed alone, each ring will "find its height" and rest there. If a ring with a higher rest height is placed before one with a lower rest height, the higher one will cut the bottom of the post off from ring placement. How many different ways are there to stack a ring tower?

<!--more-->

([FiveThirtyEight](https://fivethirtyeight.com/features/can-you-make-24/))

## Solution

This solution has two phases:

1. Getting the structure of the problem
2. Solving the resulting recurrence relation

We'll get at the structure of the problem in two passes. 

### Structure


Imagine we start with the bare post and $4$ rings. As there are $4$ rings and $4$ open heights, we'll call this the $(4,4)$ stacking problem, or $S(4,4).$ 

If we drop ring $4$ first, then it will settle to the bottom and we'll have $3$ rings with $3$ open slots, e.g., $S(3,3).$ We could also stop there, so the total number of cases where ring $4$ is placed first is $S(3,3) + 1.$ We could also drop ring $3$ first, which would settle at its height, and leave us to figure out how to place the $3$ remaining rings at the $2$ remaining heights. Or we could choose to stop there. These contribute $S(2,3) + 1.$ Carrying on, we'd get $S(1,3) + 1$ if we placed ring $2$ first. Finally, we have to add $1$ for the case where we skip straight to placing ring $1$ first. 

Altogether, this becomes

$$
\begin{align}
S(4,4) =\ &\overbrace{(1+S(3,3))}^\text{place 4 first} + \overbrace{(1+S(2,3))}^\text{place 3 first} + \\ &\overbrace{(1+S(1,3))}^\text{place 2 first} +  \overbrace{1}^\text{place 1 first} \\
       =\ &4 + S(1,3) + S(2,3) + S(3,3)
\end{align}
$$

This process spawned $S(3,3)$ which is the same problem as the original, just with one less ring and one less height. It also spawned $S(2,3)$ and $S(1,3),$ which are new. 

We can deal with $S(1,3)$ first. This is just the problem of picking $1$ out of $3$ rings to put at $1$ open height. The answer is $3$ and, in general, we can say  $S(1,n)=n.$

With $S(2,3),$ two of the three remaining rings can be chosen to sit at height $2$. We'll then have an $S(1,2)$ problem as well as the option to call it quits and place no further rings. However, since we have two choices of which ring to place at height $2$, this contribute $2\times\left(S(1,2) + 1)\right). Our other option is to pick ring $1$, which skips height $2$ and ends our tower stacking. 

In all,

$$S(2,3) = 2\times\left(S(1,2) + 1\right) + 1.$$

$$S(2,3) = 

The only way to get all $5$ rings into the post is to place them in order $5$ to $1.$ If, say, we dropped the $4$ on first, it would settle at its height and cut the other rings off from the $5$ slot. So, placing $4$ first makes a new opportunity to place $4$ rings in the remaining $3$ heights.

### Recursion relation

### Solution attempts

### Regret

### Telescope

<br>
